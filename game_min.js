"use strict";function _pageLoad(){document.querySelector("#start-button").addEventListener("click",startCountdown),document.addEventListener("keydown",function(e){"s"===e.key&&0==document.getElementById("start-button").disabled&&startCountdown()}),checkLocalHighscore()}function startCountdown(){document.getElementById("start-button").disabled=!0,setTimeout(startGame,4e3);let e=3;let t=setInterval(function(){let t=document.getElementById("countdown");t.innerHTML=`Game starts in <br><span class="number">${e}</span> ..`,t.classList.remove("dissapear"),e--},1e3);setTimeout(function(){clearInterval(t),countdown.classList.add("dissapear")},4e3);const n=document.getElementById("target");n.setAttribute("height",40),n.classList.remove("hidden"),n.classList.add("hidden");const s=document.getElementById("death-animation");s.setAttribute("height",parseFloat(n.getAttribute("height"))),s.classList.remove("hidden"),s.classList.add("hidden"),changeTargetLocation(),highScoreReset()}function startGame(){showTarget(),timerInterval(),scoreReset()}function timerInterval(){let e=10;let t=setInterval(function(){if(e>0){let t=document.getElementById("rem-time");e--,t.innerHTML=`<span class="number">${e}</span>`,0===e&&gameOver()}},1e3);setTimeout(function(){clearInterval(t)},1e4)}function showTarget(){const e=document.getElementById("target"),t=document.getElementById("death-animation");t.classList.remove("hidden"),t.classList.add("svg-animated-reverse"),setTimeout(function(){e.classList.remove("hidden"),t.classList.add("hidden"),t.classList.remove("svg-animated-reverse")},1e3);const n=document.getElementById("circle");n.addEventListener("mouseover",updateTarget),n.addEventListener("touchstart",updateTarget),n.addEventListener("mouseover",updateScore),n.addEventListener("touchstart",updateScore)}function changeTargetLocation(){const e=document.querySelector(".board"),t=document.getElementById("target"),n=parseFloat(t.getAttribute("height")),s=parseFloat(t.style.top),a=parseFloat(t.style.left);let o,r;do{o=roundToTwo(Math.random()*(e.offsetHeight-n)),r=roundToTwo(Math.random()*(e.offsetWidth-n))}while(NaN!==a&&Math.pow(s-o,2)+Math.pow(a-r,2)<4e4);t.style.top=o,t.style.left=r;const c=document.getElementById("death-animation");c.style.top=t.style.top,c.style.left=t.style.left}function roundToTwo(e){return Math.round(100*(e+Number.EPSILON))/100}function changeTargetSize(){const e=document.getElementById("target");e.setAttribute("height",roundToTwo(.93*parseFloat(e.getAttribute("height")))),document.getElementById("death-animation").setAttribute("height",parseFloat(e.getAttribute("height")))}function updateTarget(){const e=document.getElementById("circle");e.removeEventListener("mouseover",updateTarget),setTimeout(function(){e.addEventListener("mouseover",updateTarget)},300),changeTargetLocation(),changeTargetSize()}function updateScore(){let e=document.getElementById("current-score"),t=parseInt(document.querySelector("#current-score span").innerHTML);e.innerHTML=`<span class="number">${++t}</span>`}function setLocalHighscore(e){localStorage.localHighscore?e>localStorage.getItem("localHighscore")?(localStorage.setItem("localHighscore",e),newHighscore()):gameOverText():(localStorage.setItem("localHighscore",e),newHighscore())}function checkLocalHighscore(){if(localStorage.localHighscore){let e=localStorage.getItem("localHighscore");document.getElementById("high-score").innerHTML=`<span class="number">${e}</span>`}else{let e=0;document.getElementById("high-score").innerHTML=`<span class="number">${e}</span>`}}function scoreReset(){document.getElementById("current-score").innerHTML='<span class="number">0</span>'}function newHighscore(){let e=document.getElementById("high-score-text");e.classList.remove("dissapear"),e.classList.add("activeHs");let t=document.getElementById("high-score-number");t.classList.remove("dissapear"),t.classList.add("activeHs2");let n=document.querySelector("#current-score span").innerHTML;t.innerHTML=`<span class="number">${n}</span>`}function highScoreReset(){document.getElementById("high-score-text").classList.add("dissapear"),document.getElementById("high-score-number").classList.add("dissapear"),document.getElementById("game-over-text").classList.add("dissapear")}function gameOverText(){let e=document.getElementById("game-over-text");e.classList.remove("dissapear"),e.classList.add("activeHs")}function gameOver(){const e=document.getElementById("circle");e.removeEventListener("mouseover",updateTarget),e.removeEventListener("touchstart",updateTarget),document.getElementById("target").classList.add("hidden");const t=document.getElementById("death-animation");t.classList.remove("hidden"),t.classList.add("svg-animated"),setTimeout(function(){t.classList.add("hidden"),t.classList.remove("svg-animated")},2e3),setLocalHighscore(parseInt(document.querySelector("#current-score span").innerHTML)),checkLocalHighscore(),document.getElementById("start-button").disabled=!1}window.addEventListener("load",_pageLoad);